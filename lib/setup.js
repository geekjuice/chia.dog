/**
 * Copyright 2016 Nicholas Hwang
 * MIT Licensed
 *
 * @module cron.js
 */

//------------------------------------------------------------------------------
// Requirements
//------------------------------------------------------------------------------

import debug from 'debug';
import ChiaDAO from './data/ChiaDAO';

//------------------------------------------------------------------------------
// Constants
//------------------------------------------------------------------------------

const DEBUG = debug('chia-dog:setup');

//------------------------------------------------------------------------------
// Public Interface
//------------------------------------------------------------------------------

export async function start() {
  try {
    await ChiaDAO.get();
  } catch (err) {
    DEBUG('Setting up initial chia state');
    ChiaDAO.reset();
  }
}

//------------------------------------------------------------------------------
// Exports
//------------------------------------------------------------------------------

export default {
  start
};
